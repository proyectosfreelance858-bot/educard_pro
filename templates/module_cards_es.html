<div class="module-grid">
    {% for producto in productos %}
    <div class="module-card reveal" style="transition-delay: {{ loop.index * 0.1 }}s;">
        <div class="card-image-wrapper">
            <img src="{{ producto.imagen_url if producto.imagen_url else 'https://i.postimg.cc/85zK6v2N/main-student.jpg' }}" alt="Módulo">
            <span class="card-tag">{{ producto.categoria | default('REFUERZO') }}</span>
        </div>
        <div class="card-content">
            <div class="card-instructor">
                <img src="https://i.postimg.cc/50tFh3sQ/designer-3.jpg" alt="Avatar Instructor" class="instructor-avatar">
                <span class="instructor-name">{{ producto.instructor | default('Experto en Didáctica') }}</span>
            </div>
            <h3 class="card-title">{{ producto.nombre | default('Módulo Temático Principal') }}</h3>
            <p style="font-size: 0.9rem; color: var(--color-text-dark);">**Tópicos:** {{ producto.tema_1 }} y {{ producto.tema_2 }}.</p>
        </div>
        <div class="card-meta">
            <div class="meta-item"><i class="fa-solid fa-users"></i><span>{{ producto.estudiantes | default(850) | int }} Estudiantes</span></div>
            <div class="meta-item"><i class="fa-solid fa-star"></i><span>{{ "%.1f" | format(producto.rating | default(4.7)) }}</span></div>
        </div>
        <div class="card-actions card-content">
            <span class="card-price">
                {% if producto.precio == 0 or producto.precio is none %}<span class="free">GRATIS</span>{% else %}${{ "%.2f" | format(producto.precio) }}{% endif %}
            </span>
            <a href="#" class="explore-button">Ver Detalles</a>
        </div>
    </div>
    {% else %}
    <p style="color: var(--color-text-subtle); font-size: 1.2rem; text-align: center; width: 100%;">No hay módulos de refuerzo disponibles. La base de datos no arrojó resultados para la tabla "productos".</p>
    {% endfor %}
    </div>