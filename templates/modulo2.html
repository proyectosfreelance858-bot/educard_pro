<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title id="pageTitle">Módulo Ultra-Dinámico: Fraccionarios y Decimales | EDUCARD SAS</title>
    <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@400;500;600;700;800&family=Instrument+Sans:wght@400;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css">
    
    <style>
        /* ================================================================= */
        /* --- 1. VARIABLES, RESET Y ESTILOS GLOBALES (Minimalista y Dinámico) --- */
        /* ================================================================= */
        :root {
            --color-primary: #5c67ff; /* Azul Educard */
            --color-primary-light: #8e96ff;
            --color-primary-dark: #4b54ff; 
            --color-secondary: #ffc107; /* Amarillo Destacado */
            --color-background: #f0f3f8; /* Fondo más frío y moderno */
            --color-surface: #ffffff; /* Superficie Blanca */
            --color-text-dark: #1f2937; /* Texto Principal (Casi negro) */
            --color-text-subtle: #6b7280; /* Texto Secundario */
            --color-border: #e5e7eb;
            --color-success: #10b981; /* Verde más vibrante */
            --color-danger: #ef4444; /* Rojo moderno */
            --color-shadow-primary: rgba(92, 103, 255, 0.25);
            --font-heading: 'Outfit', sans-serif;
            --font-body: 'Instrument Sans', sans-serif;
            --header-height: 80px;
            --step-transition-duration: 0.6s; 
        }

        /* Reset Básico */
        * { margin: 0; padding: 0; box-sizing: border-box; }
        html { scroll-behavior: smooth; }
        body { 
            font-family: var(--font-body); 
            color: var(--color-text-dark); 
            background-color: var(--color-background); 
            line-height: 1.7; 
            overflow-x: hidden; 
            padding-top: var(--header-height); 
        }

        /* Contenedor y Tipografía */
        .container { 
            max-width: 1200px; 
            margin: 0 auto; 
            padding: 0 5%; 
        }
        h1, h2, h3, h4 { 
            font-family: var(--font-heading); 
            font-weight: 700; 
            line-height: 1.2; 
        }
        h1 { font-size: 3.2rem; }
        
        /* DISEÑO DE TÍTULOS MINIMALISTA */
        h2 { 
            font-size: 2.5rem; 
            color: var(--color-text-dark); 
            padding-bottom: 5px;
            border-bottom: 4px solid var(--color-primary-light); /* Subrayado sutil */
            display: inline-block; 
            margin-bottom: 20px;
        }
        h3 { 
            font-size: 1.8rem; 
            color: var(--color-primary-dark); 
            margin-top: 30px; 
            font-weight: 700;
        }
        h4 { 
            font-size: 1.3rem; 
            color: var(--color-text-dark); 
            margin-top: 20px; 
            font-weight: 600; 
            border-left: 5px solid var(--color-secondary); /* Pequeño acento */
            padding-left: 15px;
        }
        p { margin-bottom: 15px; }

        .section-header { text-align: center; margin-bottom: 50px; }
        .section-title { font-size: 2.8rem; font-weight: 800; margin-bottom: 15px; }
        .section-subtitle { font-size: 1.2rem; color: var(--color-text-subtle); max-width: 800px; margin: 0 auto; }
        
        /* Botones (CTA) - Se mantienen dinámicos */
        .btn {
            display: inline-flex; 
            align-items: center;
            gap: 8px;
            padding: 14px 28px; 
            border-radius: 10px; 
            text-decoration: none; 
            font-weight: 700; 
            font-size: 1rem; 
            transition: background-color 0.3s ease, transform 0.2s, box-shadow 0.3s; 
            border: none; 
            cursor: pointer;
        }

        .btn-primary {
            background-color: var(--color-primary); 
            color: white;
            box-shadow: 0 6px 15px var(--color-shadow-primary);
        }
        .btn-primary:hover { 
            background-color: var(--color-primary-dark); 
            transform: translateY(-2px); 
            box-shadow: 0 8px 20px var(--color-shadow-primary); 
        }

        .btn-outline {
            background-color: transparent;
            color: var(--color-primary);
            border: 2px solid var(--color-primary);
            box-shadow: none;
        }
        .btn-outline:hover {
            background-color: var(--color-primary);
            color: white;
        }

        /* DISEÑO DE TARJETAS MINIMALISTA Y DINÁMICO */
        .card {
            background-color: var(--color-surface);
            padding: 25px;
            border-radius: 10px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.05); /* Sombra ligera */
            margin-bottom: 25px;
            border: 1px solid var(--color-border); /* Borde sutil */
            border-left: 6px solid var(--color-primary); /* Fuerte acento de color primario */
            transition: transform 0.3s ease, box-shadow 0.3s ease; /* Efecto dinámico */
            animation: fadeIn 0.8s ease-out; /* Animación de entrada */
        }
        .card:hover {
             transform: translateY(-3px); /* Efecto levitación */
             box-shadow: 0 8px 16px rgba(0, 0, 0, 0.1);
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .alert {
            padding: 18px;
            border-radius: 10px;
            margin-top: 25px;
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: 15px;
        }
        .alert i { font-size: 1.4rem; }
        .alert-info { background-color: #e0f2fe; color: #0284c7; border: 1px solid #7dd3fc; }
        .alert-success { background-color: #d1fae5; color: var(--color-success); border: 1px solid #a7f3d0; }
        .alert-danger { background-color: #fee2e2; color: var(--color-danger); border: 1px solid #fecaca; }
        .alert-warning { background-color: #fffbeb; color: #d97706; border: 1px solid #fcd34d; }

        /* Estilos para el paso 3 (Clasificación de Decimales) */
        .decimal-table {
            width: 90%;
            margin: 30px auto;
            border-collapse: separate;
            border-spacing: 0 10px; 
            font-family: var(--font-body);
            font-size: 1.1rem;
            text-align: center;
        }
        .decimal-table th, .decimal-table td {
            padding: 15px;
            background-color: var(--color-surface);
            border: 1px solid var(--color-border);
        }
        .decimal-table th {
            background-color: var(--color-primary);
            color: white;
            font-weight: 700;
            border: none;
        }
        .decimal-table tr:first-child th:first-child { border-top-left-radius: 10px; }
        .decimal-table tr:first-child th:last-child { border-top-right-radius: 10px; }
        
        .decimal-table td:nth-child(2) {
            font-weight: 800;
            font-size: 1.2rem;
        }
        .decimal-table td span.exact { color: var(--color-success); }
        .decimal-table td span.pure { color: var(--color-danger); }
        .decimal-table td span.mixed { color: #f97316; } /* Color naranja para mixto */


        /* ========================================= */
        /* --- 2. HEADER --- */
        /* ========================================= */
        header {
            position: fixed; top: 0; left: 0; width: 100%; height: var(--header-height);
            display: flex; justify-content: space-between; align-items: center;
            padding: 0 3%; 
            background-color: var(--color-surface);
            box-shadow: 0 2px 15px rgba(0, 0, 0, 0.1); z-index: 1000;
        }
        .logo-container { text-decoration: none; display: flex; align-items: center; }
        .logo-img { height: 35px; margin-right: 10px; content: url('https://i.postimg.cc/t4tVr741/54c82322-2df7-4887-abc0-da706407fcd4-2.png'); } 
        .site-name { font-family: var(--font-heading); font-size: 1.4rem; font-weight: 700; color: var(--color-text-dark); }
        nav ul { list-style: none; display: flex; }
        nav ul li { margin-left: 35px; }
        nav ul li a { text-decoration: none; color: var(--color-text-dark); font-weight: 500; padding: 10px 0; display: block; transition: color 0.3s ease; }
        nav ul li a:hover { color: var(--color-primary); font-weight: 600; border-bottom: 2px solid var(--color-primary); padding-bottom: 8px; }
        
        /* Nuevos Estilos para el Selector de Idioma */
        .header-actions {
            display: flex;
            align-items: center; /* Alineación horizontal de bandera y botón */
        }
        .language-selector {
            position: relative;
            display: flex;
            align-items: center;
            cursor: pointer;
            padding: 10px;
            border-radius: 8px;
            margin-right: 15px; 
            transition: background-color 0.3s;
        }
        .language-selector:hover {
            background-color: #f0f3f8; /* Efecto hover sutil */
        }
        .current-flag img {
            width: 28px;
            height: 20px;
            border-radius: 3px;
            box-shadow: 0 0 5px rgba(0, 0, 0, 0.2);
        }
        .language-dropdown {
            position: absolute;
            top: 100%;
            right: 0;
            background-color: var(--color-surface);
            border: 1px solid var(--color-border);
            border-radius: 8px;
            box-shadow: 0 8px 16px rgba(0, 0, 0, 0.15);
            z-index: 1001;
            min-width: 150px;
            display: none;
            padding: 8px 0;
            margin-top: 5px;
        }
        .language-dropdown.active {
            display: block;
        }
        .language-dropdown a {
            display: flex;
            align-items: center;
            padding: 10px 15px;
            text-decoration: none;
            color: var(--color-text-dark);
            font-size: 0.95rem;
        }
        .language-dropdown a:hover {
            background-color: var(--color-background);
        }
        .language-dropdown a img {
            width: 24px;
            height: 18px;
            border-radius: 3px;
            margin-right: 10px;
        }

        .header-actions a.header-button {
            padding: 10px 20px; background-color: var(--color-primary); color: white;
            border-radius: 8px; text-decoration: none; font-weight: 600; font-size: 0.95rem;
            transition: background-color 0.3s, transform 0.2s;
        }
        .header-actions a.header-button:hover { background-color: var(--color-primary-dark); transform: translateY(-1px); }

        /* ========================================= */
        /* --- 3. ESTRUCTURA DINÁMICA DE PASOS --- */
        /* ========================================= */
        .module-wrapper { padding-top: 40px; }
        
        .progress-bar-container {
            width: 100%;
            background-color: var(--color-border);
            border-radius: 5px;
            margin-bottom: 40px;
            height: 12px;
        }
        .progress-bar {
            height: 100%;
            background-color: var(--color-success);
            border-radius: 5px;
            transition: width 0.6s cubic-bezier(0.2, 0.8, 0.2, 1); 
            width: 0%;
        }
        
        .step-content {
            background-color: var(--color-surface);
            padding: 50px;
            border-radius: 20px;
            box-shadow: 0 15px 40px rgba(0, 0, 0, 0.1);
            min-height: 650px; 
            display: none; 
            opacity: 0;
            transform: scale(0.95) translateX(20px); 
            transition: opacity var(--step-transition-duration) ease, transform var(--step-transition-duration) ease;
        }

        .step-content.active {
            display: block;
            opacity: 1;
            transform: scale(1) translateX(0);
        }

        .step-navigation {
            display: flex;
            justify-content: space-between;
            margin-top: 40px;
            padding-top: 20px;
        }
        .step-navigation button:disabled {
            opacity: 0.4;
            cursor: not-allowed;
            box-shadow: none;
        }

        /* Estilo para el Dato Curioso */
        .curious-fact {
            margin-top: 35px;
            padding: 25px;
            background-color: #ecfdf5; /* Color suave de éxito */
            border-radius: 10px;
            font-size: 1rem;
            color: var(--color-text-dark);
            border-left: 5px solid var(--color-success);
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
            font-weight: 500;
        }
        .curious-fact strong {
            color: var(--color-primary-dark);
        }

        /* Estilos para el código de ejemplo */
        .example-code {
            background-color: #f3f4f6;
            color: var(--color-text-dark);
            padding: 15px;
            border-radius: 8px;
            margin-top: 15px;
            font-family: monospace;
            white-space: pre-wrap;
            border: 1px solid var(--color-border);
            line-height: 1.5;
        }
        .example-code strong { color: var(--color-primary-dark); }
        .example-code .step-label { color: var(--color-secondary); font-weight: 700; }

        /* Contenedor de Video */
        .video-container {
            position: relative;
            padding-bottom: 56.25%; /* Relación 16:9 */
            height: 0;
            overflow: hidden;
            max-width: 100%;
            background: #000;
            margin-bottom: 25px;
            border-radius: 10px;
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.2);
        }
        .video-container iframe {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
        }
        .content-image {
            max-width: 100%;
            height: auto;
            display: block;
            margin: 20px auto;
            border-radius: 10px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
        }

        /* Estilos de la Evaluación Final */
        #quiz-form label {
            display: block;
            font-size: 1.1rem;
            font-weight: 600;
            margin: 25px 0 10px;
            color: var(--color-primary-dark);
        }
        #quiz-form input[type="text"],
        #quiz-form input[type="number"],
        #quiz-form select {
            width: 100%;
            padding: 12px;
            margin-top: 5px;
            border: 2px solid var(--color-border);
            border-radius: 8px;
            font-size: 1rem;
            transition: border-color 0.3s;
        }
        #quiz-form input:focus, #quiz-form select:focus {
            outline: none;
            border-color: var(--color-primary-light);
            box-shadow: 0 0 0 3px rgba(92, 103, 255, 0.2);
        }
        #quiz-form .radio-group, #quiz-form .true-false-group {
            display: flex;
            gap: 20px;
            margin-top: 10px;
        }
        #quiz-form .option-box {
            background-color: var(--color-background);
            padding: 15px 20px;
            border-radius: 8px;
            border: 1px solid var(--color-border);
            cursor: pointer;
            transition: all 0.2s;
            flex-grow: 1;
            text-align: center;
            font-weight: 600;
            color: var(--color-text-dark);
        }
        #quiz-form .option-box:hover {
            background-color: #e5e7eb;
        }
        #quiz-form input[type="radio"] {
            display: none;
        }
        #quiz-form input[type="radio"]:checked + .option-box {
            background-color: var(--color-primary);
            color: white;
            border-color: var(--color-primary-dark);
            box-shadow: 0 3px 8px var(--color-shadow-primary);
        }
        .incorrect-answer { border: 2px solid var(--color-danger) !important; animation: shake 0.5s; }
        .correct-answer { border: 2px solid var(--color-success) !important; }

        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            20%, 60% { transform: translateX(-5px); }
            40%, 80% { transform: translateX(5px); }
        }

        /* Summary Box */
        #quiz-result-summary {
            margin-top: 30px;
            padding: 25px;
            border-radius: 15px;
            text-align: center;
            font-size: 1.5rem;
            font-family: var(--font-heading);
            font-weight: 700;
            display: none;
            transition: opacity 0.5s ease;
        }
        .summary-success { background-color: #ecfdf5; color: var(--color-success); border: 2px solid #a7f3d0; }
        .summary-fail { background-color: #fef2f2; color: var(--color-danger); border: 2px solid #fecaca; }

        /* FOOTER ESTILOS */
        footer {
            background-color: #1a202c; /* Darker background for footer */
            color: #e2e8f0;
            padding: 50px 0 20px 0;
            margin-top: 60px;
        }
        .footer-grid {
            display: grid;
            grid-template-columns: 2fr 1fr 1fr 1fr;
            gap: 40px;
            margin-bottom: 40px;
        }
        .footer-about h5 {
            color: white;
            font-size: 1.4rem;
            margin-bottom: 15px;
            font-family: var(--font-heading);
            font-weight: 700;
        }
        .footer-about p {
            font-size: 0.95rem;
            line-height: 1.8;
            color: #ccc;
        }
        .footer-links h5 {
            font-family: var(--font-heading);
            font-size: 1.1rem;
            margin-bottom: 20px;
            font-weight: 700;
            color: var(--color-secondary);
        }
        .footer-links ul {
            list-style: none;
        }
        .footer-links ul li {
            margin-bottom: 10px;
        }
        .footer-links ul li a {
            color: #ccc;
            text-decoration: none;
            font-size: 0.9rem;
            transition: color 0.3s;
        }
        .footer-links ul li a:hover {
            color: var(--color-primary-light);
        }
        .footer-bottom {
            text-align: center;
            padding-top: 20px;
            border-top: 1px solid #2d3748;
            font-size: 0.8rem;
            color: #a0aec0;
        }
        .footer-about strong {
            color: var(--color-secondary);
        }
        /* Media Queries para Responsive Design */
        @media (max-width: 1024px) {
            h1 { font-size: 2.5rem; }
            h2 { font-size: 2rem; }
            .step-content { padding: 40px; }
            nav { display: none; } /* Ocultar nav en pantallas pequeñas (usar menú hamburguesa) */
        }
        @media (max-width: 768px) {
            h1 { font-size: 2rem; }
            h2 { font-size: 1.8rem; }
            .section-title { font-size: 2rem; }
            .section-subtitle { font-size: 1rem; }
            .step-content { padding: 30px; min-height: 500px; }
            .decimal-table { width: 100%; font-size: 1rem; }
            .footer-grid { grid-template-columns: 1fr 1fr; }
        }
    </style>
</head>
<body>
    <header>
        <a href="index.html" class="logo-container">
            <img class="logo-img" alt="Educard Logo">
            <span class="site-name">EDUCARD S.A.S.</span>
        </a>
        <nav>
            <ul>
                <li><a href="index.html" data-translate="nav_inicio">Inicio</a></li>
                <li><a href="refuerzos.html" data-translate="nav_refuerzos">Refuerzos</a></li>
                <li><a href="index.html#nosotros" data-translate="nav_nosotros">Nosotros</a></li>
                <li><a href="index.html#beneficios" data-translate="nav_beneficios">Beneficios</a></li>
                <li><a href="faq.html" data-translate="nav_faq">FAQ</a></li>
            </ul>
        </nav>
        <div class="header-actions">
            <div class="language-selector">
                <div class="current-flag">
                    <img id="current-flag-img" src="https://flagcdn.com/co.svg" alt="Colombia Flag" class="flag">
                </div>
                <div class="language-dropdown">
                    <a href="#" data-lang="es"><img src="https://flagcdn.com/co.svg" alt="Bandera Colombia"> Español</a>
                    <a href="#" data-lang="en"><img src="https://flagcdn.com/us.svg" alt="Bandera EE.UU."> English</a>
                    <a href="#" data-lang="de"><img src="https://flagcdn.com/de.svg" alt="Bandera Alemania"> Deutsch</a>
                </div>
            </div>
            <a href="acceder.html" class="header-button" data-translate="acceder_btn">Acceder</a>
        </div>
    </header>

    <main>
        <section class="module-wrapper">
            <div class="container">
                <div class="section-header">
                    <h1 class="section-title" id="moduleTitle"><i class="fa-solid fa-divide"></i> Módulo Fraccionarios y Decimales (Q)</h1>
                    <p class="section-subtitle" id="moduleSubtitle">El camino dinámico para entender las representaciones fundamentales del conjunto de los Números Racionales.</p>
                </div>
                
                <div class="progress-bar-container">
                    <div id="progress-bar" class="progress-bar"></div>
                </div>

                <div id="module-content">

                    <div id="step-1" class="step-content"> 
                        <h2><i class="fa-solid fa-book-open"></i> 1. Introducción: ¿Qué son Fraccionarios y Decimales?</h2>
                        <hr style="margin-top: 15px; border-color: var(--color-border);">

                        <div class="card">
                            <h3 data-translate="step1_def_header">Definición Clave: El Conjunto Q (Racionales)</h3>
                            <p data-translate="step1_def_text">El conjunto de los <strong>Números Racionales</strong> (simbolizado por la letra <strong>Q</strong>, del latín *Quotiens*) son el conjunto que incluye a todos los números que pueden expresarse como una <strong>fracción</strong> a/b, donde a es el $numerador$ y b (el $denominador$) es un número distinto de cero.</p>
                            <ul style="list-style-type: disc; margin-left: 25px;">
                                <li data-translate="step1_list1_1">Las Fracciones (ej. 3/4, 1/2).</li>
                                <li data-translate="step1_list1_2">Los Decimales (ej. 0.75, 0.333...).</li>
                                <li data-translate="step1_list1_3">Los Números Enteros (ej. 5 = 5/1).</li>
                            </ul>
                        </div>

                        <div class="card">
                            <h3 data-translate="step1_decimal_header">La Conexión: Fracción y Decimal</h3>
                            <p data-translate="step1_decimal_text1">Un <strong>número decimal</strong> es una forma alternativa de representar una fracción. Es simplemente el resultado de la división del numerador entre el denominador.</p>
                            <p data-translate="step1_decimal_text2">Una <strong>Fracción Decimal</strong> es un tipo especial de fracción en la que el denominador es una potencia de 10 (puede ser 10, 100, 1000, etc.).</p>
                        </div>
                        
                        <h3 data-translate="step1_video_header">Video Explicativo: Fracciones Decimales</h3>
                        <div class="video-container">
                            <iframe width="100%" height="315" src="https://www.youtube.com/embed/zBAOT2vUFPI" title="Video de Fracciones Decimales" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
                            <small style="display: block; text-align: center; color: var(--color-text-subtle); margin-top: 10px;" data-translate="step1_video_text">Video: Introducción a las Fracciones Decimales.</small>
                        </div>

                        <div class="curious-fact">
                            <strong>Dato Curioso:</strong> <span data-translate="step1_curious_fact">Los babilonios, hace más de 4000 años, ya utilizaban el concepto de fracciones para el comercio y la astronomía, aunque no en la notación moderna que conocemos.</span>
                        </div>
                    </div>

                    <div id="step-2" class="step-content">
                        <h2 data-translate="step2_title"><i class="fa-solid fa-calculator"></i> 2. Conversión: De Fraccionario a Decimal.</h2>
                        <p class="section-subtitle" data-translate="step2_subtitle">El método infalible para llevar una fracción a su expresión decimal.</p>
                        <hr style="margin-top: 15px; border-color: var(--color-border);">

                        <div class="card">
                            <h4 data-translate="step2_rule_header">Regla General: División Simple</h4>
                            <p data-translate="step2_rule_text">Para convertir cualquier fracción a/b a su expresión decimal, simplemente se debe <strong>dividir el numerador (a) entre el denominador (b)</strong>.</p>
                            <div class="example-code">
                                <span class="step-label" data-translate="step2_example1_1">Ejemplo 1 (Exacto):</span> 3/4 &rarr; 3 &div; 4 = <strong>0.75</strong> <br>
                                <span class="step-label" data-translate="step2_example1_2">Ejemplo 2 (Periódico):</span> 1/3 &rarr; 1 &div; 3 = <strong>0.333...</strong>
                            </div>
                        </div>

                        <div class="card">
                            <h4 data-translate="step2_decimal_fraction_header">Regla para Fracciones Decimales (Potencias de 10)</h4>
                            <p data-translate="step2_decimal_fraction_text1">Cuando el denominador es una potencia de 10 (10, 100, 1000, etc.), se escribe el numerador y se desplaza la coma hacia la izquierda <strong>tantas posiciones como ceros tenga el denominador</strong>.</p>
                            <div class="example-code">
                                <span class="step-label" data-translate="step2_example2_1">Ejemplo:</span> 45/10 = <strong>4.5</strong> (1 cero, 1 posición)<br>
                                <span class="step-label" data-translate="step2_example2_2">Ejemplo:</span> 7/1000 = <strong>0.007</strong> (3 ceros, 3 posiciones)
                            </div>
                        </div>

                        <h3 data-translate="step2_practice_header">Practica Rápida</h3>
                        <div class="card alert-info">
                            <p data-translate="step2_practice1">La fracción 1/2 en decimal es: <strong>0.5</strong></p>
                            <p data-translate="step2_practice2">La fracción 7/100 en decimal es: <strong>0.07</strong></p>
                        </div>

                        <div class="curious-fact">
                            <strong>Dato Curioso:</strong> <span data-translate="step2_curious_fact">El punto decimal, o coma decimal, fue popularizado por John Napier a principios del siglo XVII, haciendo los cálculos con decimales mucho más intuitivos que con la notación fraccionaria.</span>
                        </div>
                    </div>

                    <div id="step-3" class="step-content">
                        <h2 data-translate="step3_title"><i class="fa-solid fa-list-check"></i> 3. Clasificación de Números Decimales</h2>
                        <p class="section-subtitle" data-translate="step3_subtitle">Diferencia entre Exactos, Periódicos Puros y Periódicos Mixtos.</p>
                        <hr style="margin-top: 15px; border-color: var(--color-border);">
                        
                        <div class="card alert-success">
                            <h4 data-translate="step3_rule1">Decimal Exacto</h4>
                            <p data-translate="step3_rule1_text">Tiene un número <strong>finito</strong> de cifras decimales (la división termina). Ejemplo: 1/8 = 0.125.</p>
                        </div>
                        <div class="card alert-danger">
                            <h4 data-translate="step3_rule2">Decimal Periódico Puro</h4>
                            <p data-translate="step3_rule2_text">Tiene infinitas cifras que se repiten <strong>inmediatamente</strong> después de la coma. La parte repetitiva se llama <strong>periodo</strong>. Ejemplo: 2/3 = 0.666... (Se representa como 0.<strong>6</strong> con la notación de periodo).</p>
                        </div>
                        <div class="card alert-warning">
                            <h4 data-translate="step3_rule3">Decimal Periódico Mixto</h4>
                            <p data-translate="step3_rule3_text">Tiene una parte no repetitiva (<strong>anteperiodo</strong>) seguida de una parte repetitiva (<strong>periodo</strong>). Ejemplo: 5/6 = 0.8333... (Se representa como 0.8<strong>3</strong> con la notación de periodo).</p>
                        </div>

                        <h3 data-translate="step3_table_header">Tabla de Clasificación</h3>

                        <table class="decimal-table">
                            <thead>
                                <tr>
                                    <th data-translate="step3_table_header_frac">Fracción</th>
                                    <th data-translate="step3_table_header_dec">Decimal</th>
                                    <th data-translate="step3_table_header_type">Tipo</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>1/4</td>
                                    <td><span class="exact">0.25</span></td>
                                    <td><span class="exact" data-translate="step3_type_exact">Exacto</span></td>
                                </tr>
                                <tr>
                                    <td>2/3</td>
                                    <td><span class="pure">0.666...</span></td>
                                    <td><span class="pure" data-translate="step3_type_pure">Periódico Puro</span></td>
                                </tr>
                                <tr>
                                    <td>4/15</td>
                                    <td><span class="mixed">0.266...</span></td>
                                    <td><span class="mixed" data-translate="step3_type_mixed">Periódico Mixto</span></td>
                                </tr>
                            </tbody>
                        </table>
                        
                        <div class="curious-fact">
                            <strong>Dato Curioso:</strong> <span data-translate="step3_curious_fact">A pesar de tener infinitas cifras, todos los decimales (exactos, periódicos puros y mixtos) son Números Racionales (<strong>Q</strong>). Solo los decimales con infinitas cifras <strong>NO repetitivas</strong> (como &pi; o 3.14159265...) son Números Irracionales.</span>
                        </div>
                    </div>

                    <div id="step-4" class="step-content">
                        <h2 data-translate="step4_title"><i class="fa-solid fa-arrow-right-arrow-left"></i> 4. El Regreso: Fracción Generatriz</h2>
                        <p class="section-subtitle" data-translate="step4_subtitle">Convertir un número decimal a la fracción irreducible que lo originó.</p>
                        <hr style="margin-top: 15px; border-color: var(--color-border);">
                        
                        <div class="card alert-success">
                            <h3 data-translate="step4_rule1_header">Regla para Decimal Exacto</h3>
                            <p data-translate="step4_rule1_text">El numerador es el número decimal sin la coma. El denominador es un <strong>1 seguido de tantos ceros como cifras decimales</strong> haya.</p>
                            <div class="example-code">
                                <span class="step-label" data-translate="step4_example1_1">Ejemplo:</span> 0.45 &rarr; 45/100 (Simplificando por 5: <strong>9/20</strong>) <br>
                            </div>
                        </div>
                        
                        <div class="card alert-warning">
                            <h3 data-translate="step4_rule2_header">Regla Simplificada: Decimal Periódico Puro</h3>
                            <p data-translate="step4_rule2_text">El numerador es la parte decimal repetida. El denominador son <strong>tantos 9 como cifras tenga el periodo</strong>.</p>
                            <div class="example-code">
                                <span class="step-label" data-translate="step4_example2_1">Ejemplo:</span> 0.333... &rarr; 3/9 (Simplificando por 3: <strong>1/3</strong>) <br>
                            </div>
                        </div>

                        <h3 data-translate="step4_example_header">Ejemplo Resuelto (Exacto)</h3>
                        <div class="example-code" style="background-color: #eef2ff; border-left: 5px solid var(--color-primary);">
                            <span class="step-label">Decimal:</span> <strong>0.35</strong> <br>
                            <span class="step-label" data-translate="step4_example_step1">1. Numerador:</span> Escribe 35. <br>
                            <span class="step-label" data-translate="step4_example_step2">2. Denominador:</span> Como tiene 2 cifras decimales, es 100. &rarr; 35/100 <br>
                            <span class="step-label" data-translate="step4_example_step3">3. Simplificación:</span> Divide numerador y denominador por 5. &rarr; 35 &div; 5 / 100 &div; 5 = <strong>7/20</strong> <br>
                            <span class="step-label" data-translate="step4_final">Resultado Final:</span> <strong>7/20</strong>
                        </div>
                        
                        <div class="curious-fact">
                            <strong>Dato Curioso:</strong> <span data-translate="step4_curious_fact">Una de las grandes paradojas matemáticas es que la expresión decimal periódica 0.999... (con el 9 repitiéndose infinitamente) es <strong>exactamente igual</strong> al número entero 1.</span>
                        </div>
                    </div>

                    <div id="step-5" class="step-content">
                        <h2 data-translate="step5_title"><i class="fa-solid fa-graduation-cap"></i> 5. Evaluación Final: ¡Mide tu Conocimiento!</h2>
                        <p class="section-subtitle" data-translate="step5_subtitle">Responde el siguiente Quiz de 5 preguntas para validar tu aprendizaje sobre Fraccionarios y Decimales.</p>
                        <hr style="margin-top: 15px; border-color: var(--color-border);">

                        <form id="quiz-form">
                            <div id="question1">
                                <label for="q1_input" data-translate="step5_q1_label">¿Cuál es la expresión decimal de la fracción 2/5?</label>
                                <input type="text" id="q1_input" name="question1" required>
                            </div>

                            <div id="question2">
                                <label for="q2_input" data-translate="step5_q2_label">Verdadero o Falso: El decimal 0.333... (periódico puro) es un Número Irracional.</label>
                                <div class="true-false-group">
                                    <input type="radio" id="q2_true" name="question2" value="true" required>
                                    <label for="q2_true" class="option-box" data-translate="step5_q2_op1">Verdadero</label>
                                    <input type="radio" id="q2_false" name="question2" value="false">
                                    <label for="q2_false" class="option-box" data-translate="step5_q2_op2">Falso</label>
                                </div>
                            </div>

                            <div id="question3">
                                <label for="q3_op1" data-translate="step5_q3_label">Clasifica el decimal de la fracción 2/11 (2 &div; 11 = 0.181818...):</label>
                                <div class="radio-group">
                                    <input type="radio" id="q3_op1" name="question3" value="0.25">
                                    <label for="q3_op1" class="option-box" data-translate="step5_q3_op1">Decimal Exacto</label>
                                    <input type="radio" id="q3_op2" name="question3" value="0.181818...">
                                    <label for="q3_op2" class="option-box" data-translate="step5_q3_op2">Periódico Puro</label>
                                    <input type="radio" id="q3_op3" name="question3" value="0.8333...">
                                    <label for="q3_op3" class="option-box" data-translate="step5_q3_op3">Periódico Mixto</label>
                                    <input type="radio" id="q3_op4" name="question3" value="pi">
                                    <label for="q3_op4" class="option-box" data-translate="step5_q3_op4">Irracional</label>
                                </div>
                            </div>

                            <div id="question4">
                                <label for="q4_input" data-translate="step5_q4_label">Si la fracción es 5/1000, ¿el número decimal llega hasta la posición de las...?</label>
                                <input type="text" id="q4_input" name="question4" required>
                            </div>

                            <div id="question5">
                                <label for="q5_input" data-translate="step5_q5_label">Escribe la fracción generatriz irreducible del decimal exacto 0.35:</label>
                                <input type="text" id="q5_input" name="question5" required>
                            </div>

                            <div id="quiz-result-summary" class=""> </div>
                            <button type="submit" class="btn btn-primary" style="margin-top: 30px;" data-translate="step5_submit_btn">
                                <i class="fa-solid fa-clipboard-check"></i> Evaluar Respuestas
                            </button>
                        </form>
                    </div>

                </div>

                <div class="step-navigation">
                    <button id="prev-btn" class="btn btn-outline" disabled><i class="fa-solid fa-arrow-left"></i> Anterior</button>
                    <button id="next-btn" class="btn btn-primary">Siguiente <i class="fa-solid fa-arrow-right"></i></button>
                </div>
            </div>
        </section>
    </main>

    <footer>
        <div class="container">
            <div class="footer-grid">
                <div class="footer-about">
                    <h5>EDUCARD S.A.S.</h5>
                    <p>Somos una empresa dedicada a fortalecer las competencias académicas en matemáticas y tecnología, ofreciendo módulos interactivos y personalizados para el crecimiento de los estudiantes.</p>
                    <p data-translate="footer_made_with"><strong>Hecho con <i class="fa-solid fa-heart" style="color: #ef4444;"></i> en Cajicá, Cundinamarca.</strong></p>
                </div>
                <div class="footer-links">
                    <h5>Productos</h5>
                    <ul>
                        <li><a href="#">Módulos de Refuerzo</a></li>
                        <li><a href="#">Simulacros Saber</a></li>
                        <li><a href="#">Tutorías Personalizadas</a></li>
                    </ul>
                </div>
                <div class="footer-links">
                    <h5>Compañía</h5>
                    <ul>
                        <li><a href="#">Acerca de Nosotros</a></li>
                        <li><a href="#">Política de Privacidad</a></li>
                        <li><a href="#">Términos y Condiciones</a></li>
                    </ul>
                </div>
                <div class="footer-links">
                    <h5>Soporte</h5>
                    <ul>
                        <li><a href="faq.html">FAQ</a></li>
                        <li><a href="mailto:contacto@educard.co">Contacto por Email</a></li>
                        <li><a href="tel:+573001234567">Llamar (300 123 4567)</a></li>
                    </ul>
                </div>
            </div>
            <div class="footer-bottom">
                &copy; 2024 EDUCARD S.A.S. Todos los derechos reservados.
            </div>
        </div>
    </footer>

    <script>
        // =========================================
        // --- LÓGICA DEL MÓDULO INTERACTIVO ---
        // =========================================

        document.addEventListener('DOMContentLoaded', () => {

            // --- 1. LÓGICA DE TRADUCCIÓN (Corrección de la notación de texto) ---

            const languageData = {
                es: {
                    nav_inicio: "Inicio", nav_refuerzos: "Refuerzos", nav_nosotros: "Nosotros", nav_beneficios: "Beneficios", nav_faq: "FAQ", acceder_btn: "Acceder", 
                    
                    // Step 1
                    step1_def_header: "Definición Clave: El Conjunto Q (Racionales)",
                    step1_def_text: "El conjunto de los <strong>Números Racionales</strong> (simbolizado por la letra <strong>Q</strong>, del latín *Quotiens*) son el conjunto que incluye a todos los números que pueden expresarse como una <strong>fracción</strong> a/b, donde a es el $numerador$ y b (el $denominador$) es un número distinto de cero.",
                    step1_list1_1: "Las Fracciones (ej. 3/4, 1/2).",
                    step1_list1_2: "Los Decimales (ej. 0.75, 0.333...).",
                    step1_list1_3: "Los Números Enteros (ej. 5 = 5/1).",
                    step1_decimal_header: "La Conexión: Fracción y Decimal",
                    step1_decimal_text1: "Un <strong>número decimal</strong> es una forma alternativa de representar una fracción. Es simplemente el resultado de la división del numerador entre el denominador.",
                    step1_decimal_text2: "Una <strong>Fracción Decimal</strong> es un tipo especial de fracción en la que el denominador es una potencia de 10 (puede ser 10, 100, 1000, etc.).",
                    step1_video_header: "Video Explicativo: Fracciones Decimales",
                    step1_video_text: "Video: Introducción a las Fracciones Decimales.",
                    step1_curious_fact: "Los babilonios, hace más de 4000 años, ya utilizaban el concepto de fracciones para el comercio y la astronomía, aunque no en la notación moderna que conocemos.",
                    
                    // Step 2
                    step2_title: "2. Conversión: De Fraccionario a Decimal.",
                    step2_subtitle: "El método infalible para llevar una fracción a su expresión decimal.",
                    step2_rule_header: "Regla General: División Simple",
                    step2_rule_text: "Para convertir cualquier fracción a/b a su expresión decimal, simplemente se debe <strong>dividir el numerador (a) entre el denominador (b)</strong>.",
                    step2_example1_1: "Ejemplo 1 (Exacto):",
                    step2_example1_2: "Ejemplo 2 (Periódico):",
                    step2_decimal_fraction_header: "Regla para Fracciones Decimales (Potencias de 10)",
                    step2_decimal_fraction_text1: "Cuando el denominador es una potencia de 10 (10, 100, 1000, etc.), se escribe el numerador y se desplaza la coma hacia la izquierda <strong>tantas posiciones como ceros tenga el denominador</strong>.",
                    step2_example2_1: "Ejemplo:",
                    step2_example2_2: "Ejemplo:",
                    step2_practice_header: "Practica Rápida",
                    step2_practice1: "La fracción 1/2 en decimal es: <strong>0.5</strong>",
                    step2_practice2: "La fracción 7/100 en decimal es: <strong>0.07</strong>",
                    step2_curious_fact: "El punto decimal, o coma decimal, fue popularizado por John Napier a principios del siglo XVII, haciendo los cálculos con decimales mucho más intuitivos que con la notación fraccionaria.",
                    
                    // Step 3 
                    step3_title: "3. Clasificación de Números Decimales",
                    step3_subtitle: "Diferencia entre Exactos, Periódicos Puros y Periódicos Mixtos.",
                    step3_rule1: "Decimal Exacto",
                    step3_rule1_text: "Tiene un número <strong>finito</strong> de cifras decimales (la división termina). Ejemplo: 1/8 = 0.125.",
                    step3_rule2: "Decimal Periódico Puro",
                    step3_rule2_text: "Tiene infinitas cifras que se repiten <strong>inmediatamente</strong> después de la coma. La parte repetitiva se llama <strong>periodo</strong>. Ejemplo: 2/3 = 0.666... (Se representa como 0.<strong>6</strong> con la notación de periodo).",
                    step3_rule3: "Decimal Periódico Mixto",
                    step3_rule3_text: "Tiene una parte no repetitiva (<strong>anteperiodo</strong>) seguida de una parte repetitiva (<strong>periodo</strong>). Ejemplo: 5/6 = 0.8333... (Se representa como 0.8<strong>3</strong> con la notación de periodo).",
                    step3_table_header: "Tabla de Clasificación",
                    step3_table_header_frac: "Fracción",
                    step3_table_header_dec: "Decimal",
                    step3_table_header_type: "Tipo",
                    step3_type_exact: "Exacto",
                    step3_type_pure: "Periódico Puro",
                    step3_type_mixed: "Periódico Mixto",
                    step3_curious_fact: "A pesar de tener infinitas cifras, todos los decimales (exactos, periódicos puros y mixtos) son Números Racionales (<strong>Q</strong>). Solo los decimales con infinitas cifras <strong>NO repetitivas</strong> (como &pi; o 3.14159265...) son Números Irracionales.",

                    // Step 4 
                    step4_title: "4. El Regreso: Fracción Generatriz",
                    step4_subtitle: "Convertir un número decimal a la fracción irreducible que lo originó.",
                    step4_rule1_header: "Regla para Decimal Exacto",
                    step4_rule1_text: "El numerador es el número decimal sin la coma. El denominador es un <strong>1 seguido de tantos ceros como cifras decimales</strong> haya.",
                    step4_example1_1: "Ejemplo:",
                    step4_rule2_header: "Regla Simplificada: Decimal Periódico Puro",
                    step4_rule2_text: "El numerador es la parte decimal repetida. El denominador son <strong>tantos 9 como cifras tenga el periodo</strong>.",
                    step4_example2_1: "Ejemplo:",
                    step4_example_header: "Ejemplo Resuelto (Exacto)",
                    step4_example_step1: "1. Numerador:",
                    step4_example_step2: "2. Denominador:",
                    step4_example_step3: "3. Simplificación:",
                    step4_final: "Resultado Final:",
                    step4_curious_fact: "Una de las grandes paradojas matemáticas es que la expresión decimal periódica 0.999... (con el 9 repitiéndose infinitamente) es <strong>exactamente igual</strong> al número entero 1.",

                    // Step 5
                    step5_title: "5. Evaluación Final: ¡Mide tu Conocimiento!",
                    step5_subtitle: "Responde el siguiente Quiz de 5 preguntas para validar tu aprendizaje sobre Fraccionarios y Decimales.",
                    step5_q1_label: "¿Cuál es la expresión decimal de la fracción 2/5?",
                    step5_q2_label: "Verdadero o Falso: El decimal 0.333... (periódico puro) es un Número Irracional.",
                    step5_q2_op1: "Verdadero", step5_q2_op2: "Falso",
                    step5_q3_label: "Clasifica el decimal de la fracción 2/11 (2 &div; 11 = 0.181818...):",
                    step5_q3_op1: "Decimal Exacto", step5_q3_op2: "Periódico Puro", step5_q3_op3: "Periódico Mixto", step5_q3_op4: "Irracional",
                    step5_q4_label: "Si la fracción es 5/1000, ¿el número decimal llega hasta la posición de las...?",
                    step5_q5_label: "Escribe la fracción generatriz irreducible del decimal exacto 0.35:",
                    step5_submit_btn: "Evaluar Respuestas",
                    
                    // Quiz Feedback
                    quiz_feedback_perfect: `<i class="fa-solid fa-star"></i> ¡DOMINIO TOTAL! {score} de {total} correctas. Eres un experto en Racionales (Q).`,
                    quiz_feedback_good: `<i class="fa-solid fa-thumbs-up"></i> ¡Muy Bien! {score} de {total} correctas. Revisa los errores marcados para refuerzo.`,
                    quiz_feedback_poor: `<i class="fa-solid fa-frown"></i> Resultado: {score} de {total} correctas. Regresa a la sección de Teoría, ¡aún queda trabajo por hacer!`,

                    // Footer
                    footer_made_with: "<strong>Hecho con <i class=\"fa-solid fa-heart\" style=\"color: #ef4444;\"></i> en Cajicá, Cundinamarca.</strong>"
                },
                // --- TRADUCCIONES EN INGLÉS (Adaptadas al nuevo tema) ---
                en: {
                    nav_inicio: "Home", nav_refuerzos: "Reinforcements", nav_nosotros: "About Us", nav_beneficios: "Benefits", nav_faq: "FAQ", acceder_btn: "Access", 
                    
                    // Step 1
                    step1_def_header: "Key Definition: The Set Q (Rationals)",
                    step1_def_text: "The set of <strong>Rational Numbers</strong> (symbolized by the letter <strong>Q</strong>, from the Latin *Quotiens*) is the set that includes all numbers that can be expressed as a <strong>fraction</strong> a/b, where a is the $numerator$ and b (the $denominator$) is a non-zero number.",
                    step1_list1_1: "Fractions (e.g., 3/4, 1/2).",
                    step1_list1_2: "Decimals (e.g., 0.75, 0.333...).",
                    step1_list1_3: "Integers (e.g., 5 = 5/1).",
                    step1_decimal_header: "The Connection: Fraction and Decimal",
                    step1_decimal_text1: "A <strong>decimal number</strong> is an alternative way to represent a fraction. It is simply the result of dividing the numerator by the denominator.",
                    step1_decimal_text2: "A <strong>Decimal Fraction</strong> is a special type of fraction where the denominator is a power of 10 (can be 10, 100, 1000, etc.).",
                    step1_video_header: "Explanatory Video: Decimal Fractions",
                    step1_video_text: "Video: Introduction to Decimal Fractions.",
                    step1_curious_fact: "Babylonians, over 4000 years ago, were already using the concept of fractions for trade and astronomy, although not in the modern notation we know.",
                    
                    // Step 2
                    step2_title: "2. Conversion: From Fraction to Decimal.",
                    step2_subtitle: "The foolproof method to take a fraction to its decimal expression.",
                    step2_rule_header: "General Rule: Simple Division",
                    step2_rule_text: "To convert any fraction a/b to its decimal expression, you must simply <strong>divide the numerator (a) by the denominator (b)</strong>.",
                    step2_example1_1: "Example 1 (Exact):",
                    step2_example1_2: "Example 2 (Periodic):",
                    step2_decimal_fraction_header: "Rule for Decimal Fractions (Powers of 10)",
                    step2_decimal_fraction_text1: "When the denominator is a power of 10 (10, 100, 1000, etc.), write the numerator and move the decimal point to the left <strong>as many positions as there are zeros in the denominator</strong>.",
                    step2_example2_1: "Example:",
                    step2_example2_2: "Example:",
                    step2_practice_header: "Quick Practice",
                    step2_practice1: "The fraction 1/2 in decimal is: <strong>0.5</strong>",
                    step2_practice2: "The fraction 7/100 in decimal is: <strong>0.07</strong>",
                    step2_curious_fact: "The decimal point, or comma, was popularized by John Napier in the early 17th century, making calculations with decimals much more intuitive than with fractional notation.",

                    // Step 3 
                    step3_title: "3. Classification of Decimal Numbers",
                    step3_subtitle: "Differentiate between Exact, Pure Periodic, and Mixed Periodic.",
                    step3_rule1: "Exact Decimal",
                    step3_rule1_text: "It has a <strong>finite</strong> number of decimal places (the division ends). Example: 1/8 = 0.125.",
                    step3_rule2: "Pure Periodic Decimal",
                    step3_rule2_text: "It has infinite digits that repeat <strong>immediately</strong> after the decimal point. The repeating part is called the <strong>period</strong>. Example: 2/3 = 0.666... (Represented as 0.<strong>6</strong> with the period notation).",
                    step3_rule3: "Mixed Periodic Decimal",
                    step3_rule3_text: "It has a non-repeating decimal part (<strong>ante-period</strong>) followed by a repeating part (<strong>period</strong>). Example: 5/6 = 0.8333... (Represented as 0.8<strong>3</strong> with the period notation).",
                    step3_table_header: "Classification Table",
                    step3_table_header_frac: "Fraction",
                    step3_table_header_dec: "Decimal",
                    step3_table_header_type: "Type",
                    step3_type_exact: "Exact",
                    step3_type_pure: "Pure Periodic",
                    step3_type_mixed: "Mixed Periodic",
                    step3_curious_fact: "Despite having infinite digits, all decimals (exact, pure periodic, and mixed periodic) are Rational Numbers (<strong>Q</strong>). Only decimals with infinite <strong>NON-repeating</strong> digits (like &pi; or 3.14159265...) are Irrational Numbers.",

                    // Step 4 
                    step4_title: "4. The Return: Generating Fraction",
                    step4_subtitle: "Convert a decimal number back to the irreducible fraction that originated it.",
                    step4_rule1_header: "Rule for Exact Decimal",
                    step4_rule1_text: "The numerator is the decimal number without the comma. The denominator is a <strong>1 followed by as many zeros as decimal places</strong> there are.",
                    step4_example1_1: "Example:",
                    step4_rule2_header: "Simplified Rule: Pure Periodic Decimal",
                    step4_rule2_text: "The numerator is the repeated decimal part. The denominator is <strong>as many 9s as digits the period has</strong>.",
                    step4_example2_1: "Example:",
                    step4_example_header: "Solved Example (Exact)",
                    step4_example_step1: "1. Numerator:",
                    step4_example_step2: "2. Denominator:",
                    step4_example_step3: "3. Simplification:",
                    step4_final: "Final Result:",
                    step4_curious_fact: "One of the great mathematical paradoxes is that the periodic decimal expression 0.999... (with the 9 repeating infinitely) is <strong>exactly equal</strong> to the whole number 1.",

                    // Step 5
                    step5_title: "5. Final Evaluation: Measure Your Knowledge!",
                    step5_subtitle: "Answer the following 5-question Quiz to validate your learning about Fractions and Decimals.",
                    step5_q1_label: "What is the decimal expression of the fraction 2/5?",
                    step5_q2_label: "True or False: The decimal 0.333... (pure periodic) is an Irrational Number.",
                    step5_q2_op1: "True", step5_q2_op2: "False",
                    step5_q3_label: "Classify the decimal of the fraction 2/11 (2 &div; 11 = 0.181818...):",
                    step5_q3_op1: "Exact Decimal", step5_q3_op2: "Pure Periodic", step5_q3_op3: "Mixed Periodic", step5_q3_op4: "Irrational",
                    step5_q4_label: "If the fraction is 5/1000, does the decimal number reach the position of the...?",
                    step5_q5_label: "Write the irreducible generating fraction of the exact decimal 0.35:",
                    step5_submit_btn: "Evaluate Answers",
                    
                    // Quiz Feedback
                    quiz_feedback_perfect: `<i class="fa-solid fa-star"></i> TOTAL DOMINATION! {score} out of {total} correct. You are an expert in Rationals (Q).`,
                    quiz_feedback_good: `<i class="fa-solid fa-thumbs-up"></i> Very Good! {score} out of {total} correct. Review the marked errors for reinforcement.`,
                    quiz_feedback_poor: `<i class="fa-solid fa-frown"></i> Result: {score} out of {total} correct. Go back to the Theory section, there is still work to be done!`,

                    // Footer
                    footer_made_with: "<strong>Made with <i class=\"fa-solid fa-heart\" style=\"color: #ef4444;\"></i> in Cajicá, Cundinamarca.</strong>"
                },
                // --- TRADUCCIONES EN ALEMÁN (Adaptadas al nuevo tema) ---
                de: {
                    nav_inicio: "Startseite", nav_refuerzos: "Nachhilfe", nav_nosotros: "Über Uns", nav_beneficios: "Vorteile", nav_faq: "FAQ", acceder_btn: "Zugang", 
                    
                    // Step 1
                    step1_def_header: "Schlüsseldefinition: Die Menge Q (Rationale Zahlen)",
                    step1_def_text: "Die Menge der <strong>Rationalen Zahlen</strong> (symbolisiert durch den Buchstaben <strong>Q</strong>, vom lateinischen *Quotiens*) ist die Menge, die alle Zahlen umfasst, die als <strong>Bruch</strong> a/b ausgedrückt werden können, wobei a der $Zähler$ und b (der $Nenner$) eine von Null verschiedene Zahl ist.",
                    step1_list1_1: "Brüche (z.B. 3/4, 1/2).",
                    step1_list1_2: "Dezimalzahlen (z.B. 0.75, 0.333...).",
                    step1_list1_3: "Ganze Zahlen (z.B. 5 = 5/1).",
                    step1_decimal_header: "Die Verbindung: Bruch und Dezimalzahl",
                    step1_decimal_text1: "Eine <strong>Dezimalzahl</strong> ist eine alternative Darstellungsform eines Bruchs. Sie ist einfach das Ergebnis der Division des Zählers durch den Nenner.",
                    step1_decimal_text2: "Ein <strong>Dezimalbruch</strong> ist eine spezielle Art von Bruch, bei dem der Nenner eine Potenz von 10 ist (kann 10, 100, 1000, usw. sein).",
                    step1_video_header: "Erklärvideo: Dezimalbrüche",
                    step1_video_text: "Video: Einführung in Dezimalbrüche.",
                    step1_curious_fact: "Die Babylonier verwendeten bereits vor über 4000 Jahren das Konzept der Brüche für Handel und Astronomie, wenn auch nicht in der uns bekannten modernen Notation.",
                    
                    // Step 2
                    step2_title: "2. Umwandlung: Von Bruch zu Dezimalzahl.",
                    step2_subtitle: "Die narrensichere Methode, einen Bruch in seine Dezimaldarstellung zu überführen.",
                    step2_rule_header: "Allgemeine Regel: Einfache Division",
                    step2_rule_text: "Um jeden Bruch a/b in seine Dezimaldarstellung umzuwandeln, muss man lediglich <strong>den Zähler (a) durch den Nenner (b) teilen</strong>.",
                    step2_example1_1: "Beispiel 1 (Exakt):",
                    step2_example1_2: "Beispiel 2 (Periodisch):",
                    step2_decimal_fraction_header: "Regel für Dezimalbrüche (Zehnerpotenzen)",
                    step2_decimal_fraction_text1: "Wenn der Nenner eine Zehnerpotenz ist (10, 100, 1000, usw.), schreibt man den Zähler auf und verschiebt das Komma nach links, <strong>so viele Stellen wie der Nenner Nullen hat</strong>.",
                    step2_example2_1: "Beispiel:",
                    step2_example2_2: "Beispiel:",
                    step2_practice_header: "Kurzübung",
                    step2_practice1: "Der Bruch 1/2 als Dezimalzahl ist: <strong>0.5</strong>",
                    step2_practice2: "Der Bruch 7/100 als Dezimalzahl ist: <strong>0.07</strong>",
                    step2_curious_fact: "Das Dezimalkomma (oder Dezimalpunkt) wurde Anfang des 17. Jahrhunderts von John Napier populär gemacht und vereinfachte das Rechnen mit Dezimalzahlen im Vergleich zu Brüchen erheblich.",

                    // Step 3 
                    step3_title: "3. Klassifizierung von Dezimalzahlen",
                    step3_subtitle: "Unterscheidung zwischen exakten, rein periodischen und gemischt periodischen Dezimalzahlen.",
                    step3_rule1: "Exakte Dezimalzahl",
                    step3_rule1_text: "Sie hat eine <strong>endliche</strong> Anzahl von Dezimalstellen (die Division endet). Beispiel: 1/8 = 0.125.",
                    step3_rule2: "Rein Periodische Dezimalzahl",
                    step3_rule2_text: "Sie hat unendlich viele Ziffern, die sich <strong>unmittelbar</strong> nach dem Komma wiederholen. Der sich wiederholende Teil wird als <strong>Periode</strong> bezeichnet. Beispiel: 2/3 = 0.666... (Dargestellt als 0.<strong>6</strong> mit der Periodennotation).",
                    step3_rule3: "Gemischt Periodische Dezimalzahl",
                    step3_rule3_text: "Sie hat einen nicht wiederholenden Dezimalteil (<strong>Vorkomma</strong>) gefolgt von einem sich wiederholenden Teil (<strong>Periode</strong>). Ejemplo: 5/6 = 0.8333... (Dargestellt als 0.8<strong>3</strong> mit der Periodennotation).",
                    step3_table_header: "Klassifikationstabelle",
                    step3_table_header_frac: "Bruch",
                    step3_table_header_dec: "Dezimalzahl",
                    step3_table_header_type: "Typ",
                    step3_type_exact: "Exakt",
                    step3_type_pure: "Rein Periodisch",
                    step3_type_mixed: "Gemischt Periodisch",
                    step3_curious_fact: "Obwohl sie unendlich viele Ziffern haben, sind alle Dezimalzahlen (exakt, rein periodisch und gemischt periodisch) Rationale Zahlen (<strong>Q</strong>). Nur Dezimalzahlen mit unendlich vielen <strong>NICHT-sich wiederholenden</strong> Ziffern (wie &pi; oder 3.14159265...) sind Irrationale Zahlen.",

                    // Step 4 
                    step4_title: "4. Die Rückkehr: Erzeugender Bruch",
                    step4_subtitle: "Umwandlung einer Dezimalzahl zurück in den nicht kürzbar erzeugenden Bruch, der sie erzeugt hat.",
                    step4_rule1_header: "Regel für Exakte Dezimalzahl",
                    step4_rule1_text: "Der Zähler ist die Dezimalzahl ohne Komma. Der Nenner ist eine <strong>1 gefolgt von so vielen Nullen, wie Dezimalstellen</strong> vorhanden sind.",
                    step4_example1_1: "Beispiel:",
                    step4_rule2_header: "Vereinfachte Regel: Rein Periodische Dezimalzahl",
                    step4_rule2_text: "Der Zähler ist der sich wiederholende Dezimalteil. Der Nenner besteht aus <strong>so vielen 9en, wie die Periode Ziffern hat</strong>.",
                    step4_example2_1: "Beispiel:",
                    step4_example_header: "Gelöstes Beispiel (Exakt)",
                    step4_example_step1: "1. Zähler:",
                    step4_example_step2: "2. Nenner:",
                    step4_example_step3: "3. Kürzung:",
                    step4_final: "Endergebnis:",
                    step4_curious_fact: "Eines der großen mathematischen Paradoxa ist, dass der periodische Dezimalausdruck 0.999... (wobei sich die 9 unendlich wiederholt) ist <strong>exakt gleich</strong> der ganzen Zahl 1.",

                    // Step 5
                    step5_title: "5. Abschließende Bewertung: Messe dein Wissen!",
                    step5_subtitle: "Beantworte das folgende 5-Fragen-Quiz, um dein Wissen über Brüche und Dezimalzahlen zu überprüfen.",
                    step5_q1_label: "Was ist der Dezimalausdruck des Bruches 2/5?",
                    step5_q2_label: "Wahr oder Falsch: Die Dezimalzahl 0.333... (rein periodisch) ist eine Irrationale Zahl.",
                    step5_q2_op1: "Wahr", step5_q2_op2: "Falsch",
                    step5_q3_label: "Klassifiziere die Dezimalzahl des Bruches 2/11 (2 &div; 11 = 0.181818...):",
                    step5_q3_op1: "Exakte Dezimalzahl", step5_q3_op2: "Rein Periodisch", step5_q3_op3: "Gemischt Periodisch", step5_q3_op4: "Irracional",
                    step5_q4_label: "Wenn der Bruch 5/1000 ist, reicht die Dezimalzahl bis zur Position der...?",
                    step5_q5_label: "Schreibe den nicht kürzbar erzeugenden Bruch der exakten Dezimalzahl 0.35 auf:",
                    step5_submit_btn: "Antworten Auswerten",
                    
                    // Quiz Feedback
                    quiz_feedback_perfect: `<i class="fa-solid fa-star"></i> VOLLE KONTROLLE! {score} von {total} richtig. Du bist ein Experte für Rationale Zahlen (Q).`,
                    quiz_feedback_good: `<i class="fa-solid fa-thumbs-up"></i> Sehr Gut! {score} von {total} richtig. Überprüfe die markierten Fehler zur Vertiefung.`,
                    quiz_feedback_poor: `<i class="fa-solid fa-frown"></i> Ergebnis: {score} von {total} richtig. Gehe zurück zum Theorieabschnitt, es gibt noch Arbeit zu erledigen!`,

                    // Footer
                    footer_made_with: "<strong>Mit <i class=\"fa-solid fa-heart\" style=\"color: #ef4444;\"></i> in Cajicá, Cundinamarca, erstellt.</strong>"
                }
            }; 

            function applyTranslation(lang) {
                const translations = languageData[lang];
                if (!translations) return;

                document.getElementById('pageTitle').textContent = lang === 'es' 
                    ? "Módulo Ultra-Dinámico: Fraccionarios y Decimales | EDUCARD SAS" 
                    : lang === 'en' 
                    ? "Dynamic Module: Fractions and Decimals | EDUCARD SAS"
                    : "Dynamisches Modul: Brüche und Dezimalzahlen | EDUCARD SAS";

                document.getElementById('moduleTitle').innerHTML = lang === 'es' 
                    ? '<i class="fa-solid fa-divide"></i> Módulo Fraccionarios y Decimales (Q)'
                    : lang === 'en'
                    ? '<i class="fa-solid fa-divide"></i> Fractions and Decimals Module (Q)'
                    : '<i class="fa-solid fa-divide"></i> Modul Brüche und Dezimalzahlen (Q)';
                
                document.getElementById('moduleSubtitle').textContent = lang === 'es'
                    ? "El camino dinámico para entender las representaciones fundamentales del conjunto de los Números Racionales."
                    : lang === 'en'
                    ? "The dynamic way to understand the fundamental representations of the set of Rational Numbers."
                    : "Der dynamische Weg, die fundamentalen Darstellungen der Menge der Rationalen Zahlen zu verstehen.";


                document.querySelectorAll('[data-translate]').forEach(element => {
                    const key = element.dataset.translate;
                    if (translations[key]) {
                        element.innerHTML = translations[key]; 
                    }
                });
                
                // Actualizar la bandera (simulación)
                const flagImg = document.getElementById('current-flag-img');
                if (lang === 'es') flagImg.src = 'https://flagcdn.com/co.svg';
                else if (lang === 'en') flagImg.src = 'https://flagcdn.com/us.svg';
                else if (lang === 'de') flagImg.src = 'https://flagcdn.com/de.svg';
            }

            // 2. Lógica de Navegación (Copiada de modulo1.html)
            const steps = [
                document.getElementById('step-1'),
                document.getElementById('step-2'),
                document.getElementById('step-3'),
                document.getElementById('step-4'),
                document.getElementById('step-5')
            ];
            const totalSteps = steps.length;
            let currentStep = 0;
            const prevBtn = document.getElementById('prev-btn');
            const nextBtn = document.getElementById('next-btn');
            const progressBar = document.getElementById('progress-bar');
            
            // Manejar el clic fuera del dropdown para cerrarlo
            document.body.addEventListener('click', (e) => {
                if (!e.target.closest('.language-selector')) {
                    document.querySelectorAll('.language-dropdown').forEach(d => d.classList.remove('active'));
                }
            });

            // Lógica para mostrar/ocultar pasos y actualizar la barra
            function showStep(stepIndex) {
                // Validación para evitar pasos fuera de rango
                if (stepIndex < 0 || stepIndex >= totalSteps) return;

                // Ocultar todos los pasos y remover la clase 'active'
                steps.forEach((step, index) => {
                    if (index === currentStep && index !== stepIndex) {
                         // Transición de salida
                        step.style.opacity = '0';
                        step.style.transform = stepIndex > currentStep ? 'scale(0.95) translateX(-20px)' : 'scale(0.95) translateX(20px)';
                        setTimeout(() => {
                            step.classList.remove('active');
                            
                            // Transición de entrada del nuevo paso
                            currentStep = stepIndex;
                            const newStep = steps[currentStep];
                            newStep.classList.add('active');
                            newStep.style.opacity = '1';
                            newStep.style.transform = 'scale(1) translateX(0)';
                            updateNavigation();
                        }, 600); // Duración de la animación
                    } else if (index === stepIndex && index === currentStep) {
                        // Si es el primer paso o si el índice no ha cambiado, solo actualiza la navegación
                        steps[stepIndex].classList.add('active');
                        steps[stepIndex].style.opacity = '1';
                        steps[stepIndex].style.transform = 'scale(1) translateX(0)';
                        currentStep = stepIndex;
                        updateNavigation();
                    }
                });

                if (currentStep !== stepIndex) {
                     // Solo si el paso es realmente diferente (para evitar la doble animación)
                    currentStep = stepIndex;
                    updateNavigation();
                }
               
            }

            function updateNavigation() {
                prevBtn.disabled = currentStep === 0;
                // El botón Siguiente se deshabilita en el paso final (que es el quiz)
                nextBtn.disabled = currentStep === totalSteps - 1; 

                // Actualizar la barra de progreso. El progreso está basado en el paso que se está VISUALIZANDO.
                // 5 pasos: 20%, 40%, 60%, 80%, 100%
                const progressPercentage = ((currentStep + 1) / totalSteps) * 100;
                progressBar.style.width = `${progressPercentage}%`;

                // Subir al tope del módulo
                document.querySelector('.module-wrapper').scrollIntoView({ behavior: 'smooth', block: 'start' });
            }

            // Event Listeners para navegación
            if (prevBtn) {
                prevBtn.addEventListener('click', () => {
                    if (currentStep > 0) {
                        showStep(currentStep - 1);
                    }
                });
            }
            if (nextBtn) {
                nextBtn.addEventListener('click', () => {
                    if (currentStep < totalSteps - 1) {
                        showStep(currentStep + 1);
                    }
                });
            }

            // --- 3. LÓGICA DE EVALUACIÓN DEL QUIZ (Actualizada para Fraccionarios/Decimales) ---
            const quizForm = document.getElementById('quiz-form');
            const quizSummaryDiv = document.getElementById('quiz-result-summary');

            // Respuestas correctas para el módulo de Fraccionarios y Decimales
            const correctAnswers = {
                question1: '0.4',      // 2/5 = 0.4
                question2: 'false',    // 0.333... es Racional (Falso que sea Irracional).
                question3: '0.181818...', // 2/11 = 0.181818... es Periódico Puro
                question4: 'milesimas', // 5/1000 = 0.005. La posición de la 5 es milésimas.
                question5: '7/20'      // 0.35 = 35/100 = 7/20
            };

            if (quizForm) {
                quizForm.addEventListener('submit', (e) => {
                    e.preventDefault();
                    evaluateQuiz();
                });
            }

            function normalizeInput(value) {
                // Normaliza para comparar números y fracciones (quita espacios, convierte a minúsculas, y maneja variantes de "milésimas")
                return value.trim().toLowerCase()
                            .replace(/\s/g, '')
                            .replace('milésimas', 'milesimas')
                            .replace('milesima', 'milesimas');
            }
            
            function evaluateQuiz() {
                let score = 0;
                const totalQuestions = Object.keys(correctAnswers).length;

                // Limpiar estilos anteriores
                document.querySelectorAll('.option-box').forEach(box => {
                    box.classList.remove('correct-answer', 'incorrect-answer');
                });
                document.querySelectorAll('#quiz-form input, #quiz-form select').forEach(input => {
                    input.classList.remove('correct-answer', 'incorrect-answer');
                });

                for (const [key, correctValue] of Object.entries(correctAnswers)) {
                    const questionElement = document.getElementById(key);
                    if (!questionElement) continue;
                    let userAnswer = null;
                    let isCorrect = false;

                    // Lógica para preguntas de tipo 'radio' (opción única)
                    if (questionElement.querySelector('input[type="radio"]')) {
                        const checkedInput = questionElement.querySelector('input[type="radio"]:checked');
                        if (checkedInput) {
                            userAnswer = normalizeInput(checkedInput.value);
                            isCorrect = userAnswer === normalizeInput(correctValue);
                            
                            // Aplicar estilo al contenedor de la opción
                            questionElement.querySelectorAll('input[type="radio"]').forEach(radioInput => {
                                const boxLabel = document.querySelector(`label[for="${radioInput.id}"]`);
                                if (!boxLabel) return;

                                if (normalizeInput(radioInput.value) === userAnswer) {
                                    boxLabel.classList.add(isCorrect ? 'correct-answer' : 'incorrect-answer');
                                } else if (normalizeInput(radioInput.value) === normalizeInput(correctValue)) {
                                    // Marcar la respuesta correcta (solo si la del usuario es incorrecta)
                                    if (!isCorrect) {
                                        boxLabel.classList.add('correct-answer');
                                    }
                                }
                            });
                        }
                    } 
                    // Lógica para preguntas de tipo 'text' o 'number'
                    else {
                        const inputElement = questionElement.querySelector('input, select');
                        if (inputElement) {
                            userAnswer = normalizeInput(inputElement.value);
                            isCorrect = userAnswer === normalizeInput(correctValue);

                            if (isCorrect) {
                                inputElement.classList.add('correct-answer');
                            } else {
                                inputElement.classList.add('incorrect-answer');
                            }
                        }
                    }

                    if (isCorrect) {
                        score++;
                    }
                }

                // Mostrar el resumen del resultado
                displayQuizSummary(score, totalQuestions);
            }

            function displayQuizSummary(score, totalQuestions) {
                quizSummaryDiv.style.display = 'block';
                quizSummaryDiv.classList.remove('summary-success', 'summary-fail');
                let feedbackText;
                let lang = localStorage.getItem('educardLang') || 'es';
                const translations = languageData[lang];

                if (score === totalQuestions) {
                    quizSummaryDiv.classList.add('summary-success');
                    feedbackText = translations.quiz_feedback_perfect.replace('{score}', score).replace('{total}', totalQuestions);
                } else if (score >= 3) { // 3 o más correctas
                    quizSummaryDiv.classList.add('summary-success');
                    feedbackText = translations.quiz_feedback_good.replace('{score}', score).replace('{total}', totalQuestions);
                } else {
                    quizSummaryDiv.classList.add('summary-fail');
                    feedbackText = translations.quiz_feedback_poor.replace('{score}', score).replace('{total}', totalQuestions);
                }
                
                quizSummaryDiv.innerHTML = feedbackText;
            }

            // --- 4. INICIALIZACIÓN ---
            
            // Lógica para el selector de idioma (copiado de modulo1.html)
            document.querySelectorAll('.language-selector').forEach(selector => {
                const currentFlag = selector.querySelector('.current-flag');
                const dropdown = selector.querySelector('.language-dropdown');
                
                // Si el selector no está activo, no tiene evento click para abrir
                currentFlag.addEventListener('click', (e) => {
                    e.stopPropagation(); // Evita que se cierre por el body.click
                    // Cerrar otros dropdowns antes de abrir este
                    document.querySelectorAll('.language-dropdown').forEach(d => {
                        if (d !== dropdown) d.classList.remove('active');
                    });
                    dropdown.classList.toggle('active');
                });

                // Manejar la selección de idioma dentro del dropdown
                selector.querySelectorAll('.language-dropdown a').forEach(link => {
                    link.addEventListener('click', (e) => {
                        e.preventDefault();
                        const newLang = link.dataset.lang;
                        applyTranslation(newLang);
                        localStorage.setItem('educardLang', newLang); // Guardar la preferencia
                        document.querySelectorAll('.language-dropdown').forEach(d => d.classList.remove('active'));
                    });
                });
            });

            // Aplicar traducción inicial (o cargar preferencia)
            const savedLang = localStorage.getItem('educardLang') || 'es';
            applyTranslation(savedLang);

            // 3. Inicializar Módulo de Pasos (Ejecuta la función de navegación)
            if (steps.length > 0) {
                showStep(0);
            }
        });
    </script>

</body>
</html>